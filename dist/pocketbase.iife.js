var PocketBase=function(){"use strict";var extendStatics=function(t,e){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},extendStatics(t,e)};function __extends(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}var __assign=function(){return __assign=Object.assign||function __assign(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},__assign.apply(this,arguments)};function __awaiter(t,e,i,n){return new(i||(i=Promise))((function(o,r){function fulfilled(t){try{step(n.next(t))}catch(t){r(t)}}function rejected(t){try{step(n.throw(t))}catch(t){r(t)}}function step(t){t.done?o(t.value):function adopt(t){return t instanceof i?t:new i((function(e){e(t)}))}(t.value).then(fulfilled,rejected)}step((n=n.apply(t,e||[])).next())}))}function __generator(t,e){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function verb(s){return function(c){return function step(s){if(i)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(a=0)),a;)try{if(i=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}var t,e=function(t){function ClientResponseError(e){var i,n,o,r,a=this;return(a=t.call(this,"ClientResponseError")||this).url="",a.status=0,a.response={},a.isAbort=!1,a.originalError=null,Object.setPrototypeOf(a,ClientResponseError.prototype),e instanceof ClientResponseError||(a.originalError=e),null!==e&&"object"==typeof e&&(a.url="string"==typeof e.url?e.url:"",a.status="number"==typeof e.status?e.status:0,a.response=null!==e.data&&"object"==typeof e.data?e.data:{},a.isAbort=!!e.isAbort),"undefined"!=typeof DOMException&&e instanceof DOMException&&(a.isAbort=!0),a.name="ClientResponseError "+a.status,a.message=null===(i=a.response)||void 0===i?void 0:i.message,a.message||(a.isAbort?a.message="The request was autocancelled. You can find more info in https://github.com/pocketbase/js-sdk#auto-cancellation.":(null===(r=null===(o=null===(n=a.originalError)||void 0===n?void 0:n.cause)||void 0===o?void 0:o.message)||void 0===r?void 0:r.includes("ECONNREFUSED ::1"))?a.message="Failed to connect to the PocketBase server. Try changing the SDK URL from localhost to 127.0.0.1 (https://github.com/pocketbase/js-sdk/issues/21).":a.message="Something went wrong while processing your request."),a}return __extends(ClientResponseError,t),Object.defineProperty(ClientResponseError.prototype,"data",{get:function(){return this.response},enumerable:!1,configurable:!0}),ClientResponseError.prototype.toJSON=function(){return __assign({},this)},ClientResponseError}(Error),i=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function cookieSerialize(t,e,n){var o=Object.assign({},n||{}),r=o.encode||defaultEncode;if(!i.test(t))throw new TypeError("argument name is invalid");var a=r(e);if(a&&!i.test(a))throw new TypeError("argument val is invalid");var s=t+"="+a;if(null!=o.maxAge){var c=o.maxAge-0;if(isNaN(c)||!isFinite(c))throw new TypeError("option maxAge is invalid");s+="; Max-Age="+Math.floor(c)}if(o.domain){if(!i.test(o.domain))throw new TypeError("option domain is invalid");s+="; Domain="+o.domain}if(o.path){if(!i.test(o.path))throw new TypeError("option path is invalid");s+="; Path="+o.path}if(o.expires){if(!function isDate(t){return"[object Date]"===Object.prototype.toString.call(t)||t instanceof Date}(o.expires)||isNaN(o.expires.valueOf()))throw new TypeError("option expires is invalid");s+="; Expires="+o.expires.toUTCString()}if(o.httpOnly&&(s+="; HttpOnly"),o.secure&&(s+="; Secure"),o.priority)switch("string"==typeof o.priority?o.priority.toLowerCase():o.priority){case"low":s+="; Priority=Low";break;case"medium":s+="; Priority=Medium";break;case"high":s+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}if(o.sameSite)switch("string"==typeof o.sameSite?o.sameSite.toLowerCase():o.sameSite){case!0:s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"strict":s+="; SameSite=Strict";break;case"none":s+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return s}function defaultDecode(t){return-1!==t.indexOf("%")?decodeURIComponent(t):t}function defaultEncode(t){return encodeURIComponent(t)}function getTokenPayload(e){if(e)try{var i=decodeURIComponent(t(e.split(".")[1]).split("").map((function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(i)||{}}catch(t){}return{}}t="function"==typeof atob?atob:function(t){var e=String(t).replace(/=+$/,"");if(e.length%4==1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(var i,n,o=0,r=0,a="";n=e.charAt(r++);~n&&(i=o%4?64*i+n:n,o++%4)?a+=String.fromCharCode(255&i>>(-2*o&6)):0)n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n);return a};var n=function(){function BaseModel(t){void 0===t&&(t={}),this.$load(t||{})}return BaseModel.prototype.load=function(t){return this.$load(t)},BaseModel.prototype.$load=function(t){for(var e=0,i=Object.entries(t);e<i.length;e++){var n=i[e],o=n[0],r=n[1];this[o]=r}this.id=void 0!==t.id?t.id:"",this.created=void 0!==t.created?t.created:"",this.updated=void 0!==t.updated?t.updated:""},Object.defineProperty(BaseModel.prototype,"$isNew",{get:function(){return!this.id},enumerable:!1,configurable:!0}),BaseModel.prototype.clone=function(){return this.$clone()},BaseModel.prototype.$clone=function(){var t="function"==typeof structuredClone?structuredClone(this):JSON.parse(JSON.stringify(this));return new this.constructor(t)},BaseModel.prototype.export=function(){return this.$export()},BaseModel.prototype.$export=function(){return"function"==typeof structuredClone?structuredClone(this):Object.assign({},this)},BaseModel}(),o=function(t){function Record(){return null!==t&&t.apply(this,arguments)||this}return __extends(Record,t),Record.prototype.$load=function(e){t.prototype.$load.call(this,e),this.collectionId="string"==typeof e.collectionId?e.collectionId:"",this.collectionName="string"==typeof e.collectionName?e.collectionName:"",this._loadExpand(e.expand)},Record.prototype._loadExpand=function(t){for(var e in t=t||{},this.expand={},t)Array.isArray(t[e])?this.expand[e]=t[e].map((function(t){return new Record(t||{})})):this.expand[e]=new Record(t[e]||{})},Record}(n),r=function(t){function Admin(){return null!==t&&t.apply(this,arguments)||this}return __extends(Admin,t),Admin.prototype.$load=function(e){t.prototype.$load.call(this,e),this.avatar="number"==typeof e.avatar?e.avatar:0,this.email="string"==typeof e.email?e.email:""},Admin}(n),a="pb_auth",s=function(t){function LocalAuthStore(e){void 0===e&&(e="pocketbase_auth");var i=t.call(this)||this;return i.storageFallback={},i.storageKey=e,i}return __extends(LocalAuthStore,t),Object.defineProperty(LocalAuthStore.prototype,"token",{get:function(){return(this._storageGet(this.storageKey)||{}).token||""},enumerable:!1,configurable:!0}),Object.defineProperty(LocalAuthStore.prototype,"model",{get:function(){var t,e=this._storageGet(this.storageKey)||{};return null===e||"object"!=typeof e||null===e.model||"object"!=typeof e.model?null:void 0===(null===(t=e.model)||void 0===t?void 0:t.collectionId)?new r(e.model):new o(e.model)},enumerable:!1,configurable:!0}),LocalAuthStore.prototype.save=function(e,i){this._storageSet(this.storageKey,{token:e,model:i}),t.prototype.save.call(this,e,i)},LocalAuthStore.prototype.clear=function(){this._storageRemove(this.storageKey),t.prototype.clear.call(this)},LocalAuthStore.prototype._storageGet=function(t){if(wx){var e=wx.getStorageSync(t)||"";try{return JSON.parse(e)}catch(t){return e}}return this.storageFallback[t]},LocalAuthStore.prototype._storageSet=function(t,e){if(wx){var i=e;"string"!=typeof e&&(i=JSON.stringify(e)),wx.setStorageSync(t,i)}else this.storageFallback[t]=e},LocalAuthStore.prototype._storageRemove=function(t){wx&&wx.removeStorageSync(t),delete this.storageFallback[t]},LocalAuthStore}(function(){function BaseAuthStore(){this.baseToken="",this.baseModel=null,this._onChangeCallbacks=[]}return Object.defineProperty(BaseAuthStore.prototype,"token",{get:function(){return this.baseToken},enumerable:!1,configurable:!0}),Object.defineProperty(BaseAuthStore.prototype,"model",{get:function(){return this.baseModel},enumerable:!1,configurable:!0}),Object.defineProperty(BaseAuthStore.prototype,"isValid",{get:function(){return!function isTokenExpired(t,e){void 0===e&&(e=0);var i=getTokenPayload(t);return!(Object.keys(i).length>0&&(!i.exp||i.exp-e>Date.now()/1e3))}(this.token)},enumerable:!1,configurable:!0}),BaseAuthStore.prototype.save=function(t,e){this.baseToken=t||"",this.baseModel=null!==e&&"object"==typeof e?void 0!==e.collectionId?new o(e):new r(e):null,this.triggerChange()},BaseAuthStore.prototype.clear=function(){this.baseToken="",this.baseModel=null,this.triggerChange()},BaseAuthStore.prototype.loadFromCookie=function(t,e){void 0===e&&(e=a);var i=function cookieParse(t,e){var i={};if("string"!=typeof t)return i;for(var n=Object.assign({},e||{}).decode||defaultDecode,o=0;o<t.length;){var r=t.indexOf("=",o);if(-1===r)break;var a=t.indexOf(";",o);if(-1===a)a=t.length;else if(a<r){o=t.lastIndexOf(";",r-1)+1;continue}var s=t.slice(o,r).trim();if(void 0===i[s]){var c=t.slice(r+1,a).trim();34===c.charCodeAt(0)&&(c=c.slice(1,-1));try{i[s]=n(c)}catch(t){i[s]=c}}o=a+1}return i}(t||"")[e]||"",n={};try{(null===typeof(n=JSON.parse(i))||"object"!=typeof n||Array.isArray(n))&&(n={})}catch(t){}this.save(n.token||"",n.model||null)},BaseAuthStore.prototype.exportToCookie=function(t,e){var i,n,r;void 0===e&&(e=a);var s={secure:!0,sameSite:!0,httpOnly:!0,path:"/"},c=getTokenPayload(this.token);(null==c?void 0:c.exp)?s.expires=new Date(1e3*c.exp):s.expires=new Date("1970-01-01"),t=Object.assign({},s,t);var l={token:this.token,model:(null===(i=this.model)||void 0===i?void 0:i.export())||null},p=cookieSerialize(e,JSON.stringify(l),t),u="undefined"!=typeof Blob?new Blob([p]).size:p.length;return l.model&&u>4096&&(l.model={id:null===(n=null==l?void 0:l.model)||void 0===n?void 0:n.id,email:null===(r=null==l?void 0:l.model)||void 0===r?void 0:r.email},this.model instanceof o&&(l.model.username=this.model.username,l.model.verified=this.model.verified,l.model.collectionId=this.model.collectionId),p=cookieSerialize(e,JSON.stringify(l),t)),p},BaseAuthStore.prototype.onChange=function(t,e){var i=this;return void 0===e&&(e=!1),this._onChangeCallbacks.push(t),e&&t(this.token,this.model),function(){for(var e=i._onChangeCallbacks.length-1;e>=0;e--)if(i._onChangeCallbacks[e]==t)return delete i._onChangeCallbacks[e],void i._onChangeCallbacks.splice(e,1)}},BaseAuthStore.prototype.triggerChange=function(){for(var t=0,e=this._onChangeCallbacks;t<e.length;t++){var i=e[t];i&&i(this.token,this.model)}},BaseAuthStore}()),c=function c(t){this.client=t},l=function(t){function SettingsService(){return null!==t&&t.apply(this,arguments)||this}return __extends(SettingsService,t),SettingsService.prototype.getAll=function(t){return void 0===t&&(t={}),this.client.send("/api/settings",{method:"GET",params:t}).then((function(t){return t||{}}))},SettingsService.prototype.update=function(t,e){return void 0===t&&(t={}),void 0===e&&(e={}),this.client.send("/api/settings",{method:"PATCH",params:e,body:t}).then((function(t){return t||{}}))},SettingsService.prototype.testS3=function(t,e){void 0===t&&(t="storage"),void 0===e&&(e={});var i={filesystem:t};return this.client.send("/api/settings/test/s3",{method:"POST",params:e,body:i}).then((function(){return!0}))},SettingsService.prototype.testEmail=function(t,e,i){void 0===i&&(i={});var n={email:t,template:e};return this.client.send("/api/settings/test/email",{method:"POST",params:i,body:n}).then((function(){return!0}))},SettingsService.prototype.generateAppleClientSecret=function(t,e,i,n,o,r,a){return void 0===r&&(r={}),void 0===a&&(a={}),r=Object.assign({clientId:t,teamId:e,keyId:i,privateKey:n,duration:o},r),this.client.send("/api/settings/apple/generate-client-secret",{method:"POST",params:a,body:r})},SettingsService}(c),p=function p(t,e,i,n,o){this.page=t>0?t:1,this.perPage=e>=0?e:0,this.totalItems=i>=0?i:0,this.totalPages=n>=0?n:0,this.items=o||[]},u=function(t){function BaseCrudService(){return null!==t&&t.apply(this,arguments)||this}return __extends(BaseCrudService,t),BaseCrudService.prototype._getFullList=function(t,e,i){var n=this;void 0===e&&(e=200),void 0===i&&(i={});var o=[],request=function(r){return __awaiter(n,void 0,void 0,(function(){return __generator(this,(function(n){return[2,this._getList(t,r,e||200,i).then((function(t){var e=t,i=e.items,n=e.totalItems;return o=o.concat(i),i.length&&n>o.length?request(r+1):o}))]}))}))};return request(1)},BaseCrudService.prototype._getList=function(t,e,i,n){var o=this;return void 0===e&&(e=1),void 0===i&&(i=30),void 0===n&&(n={}),n=Object.assign({page:e,perPage:i},n),this.client.send(t,{method:"GET",params:n}).then((function(t){var e=[];if(null==t?void 0:t.items){t.items=t.items||[];for(var i=0,n=t.items;i<n.length;i++){var r=n[i];e.push(o.decode(r))}}return new p((null==t?void 0:t.page)||1,(null==t?void 0:t.perPage)||0,(null==t?void 0:t.totalItems)||0,(null==t?void 0:t.totalPages)||0,e)}))},BaseCrudService.prototype._getOne=function(t,e,i){var n=this;return void 0===i&&(i={}),this.client.send(t+"/"+encodeURIComponent(e),{method:"GET",params:i}).then((function(t){return n.decode(t)}))},BaseCrudService.prototype._getFirstListItem=function(t,i,n){return void 0===n&&(n={}),n=Object.assign({filter:i,$cancelKey:"one_by_filter_"+t+"_"+i},n),this._getList(t,1,1,n).then((function(t){var i;if(!(null===(i=null==t?void 0:t.items)||void 0===i?void 0:i.length))throw new e({status:404,data:{code:404,message:"The requested resource wasn't found.",data:{}}});return t.items[0]}))},BaseCrudService.prototype._create=function(t,e,i){var n=this;return void 0===e&&(e={}),void 0===i&&(i={}),this.client.send(t,{method:"POST",params:i,body:e}).then((function(t){return n.decode(t)}))},BaseCrudService.prototype._update=function(t,e,i,n){var o=this;return void 0===i&&(i={}),void 0===n&&(n={}),this.client.send(t+"/"+encodeURIComponent(e),{method:"PATCH",params:n,body:i}).then((function(t){return o.decode(t)}))},BaseCrudService.prototype._delete=function(t,e,i){return void 0===i&&(i={}),this.client.send(t+"/"+encodeURIComponent(e),{method:"DELETE",params:i}).then((function(){return!0}))},BaseCrudService}(c),d=function(t){function CrudService(){return null!==t&&t.apply(this,arguments)||this}return __extends(CrudService,t),CrudService.prototype.getFullList=function(t,e){if("number"==typeof t)return this._getFullList(this.baseCrudPath,t,e);var i=Object.assign({},t,e);return this._getFullList(this.baseCrudPath,i.batch||200,i)},CrudService.prototype.getList=function(t,e,i){return void 0===t&&(t=1),void 0===e&&(e=30),void 0===i&&(i={}),this._getList(this.baseCrudPath,t,e,i)},CrudService.prototype.getFirstListItem=function(t,e){return void 0===e&&(e={}),this._getFirstListItem(this.baseCrudPath,t,e)},CrudService.prototype.getOne=function(t,e){return void 0===e&&(e={}),this._getOne(this.baseCrudPath,t,e)},CrudService.prototype.create=function(t,e){return void 0===t&&(t={}),void 0===e&&(e={}),this._create(this.baseCrudPath,t,e)},CrudService.prototype.update=function(t,e,i){return void 0===e&&(e={}),void 0===i&&(i={}),this._update(this.baseCrudPath,t,e,i)},CrudService.prototype.delete=function(t,e){return void 0===e&&(e={}),this._delete(this.baseCrudPath,t,e)},CrudService}(u),h=function(t){function AdminService(){return null!==t&&t.apply(this,arguments)||this}return __extends(AdminService,t),AdminService.prototype.decode=function(t){return new r(t)},Object.defineProperty(AdminService.prototype,"baseCrudPath",{get:function(){return"/api/admins"},enumerable:!1,configurable:!0}),AdminService.prototype.update=function(e,i,n){var o=this;return void 0===i&&(i={}),void 0===n&&(n={}),t.prototype.update.call(this,e,i,n).then((function(t){var e,i;return o.client.authStore.model&&void 0===(null===(e=o.client.authStore.model)||void 0===e?void 0:e.collectionId)&&(null===(i=o.client.authStore.model)||void 0===i?void 0:i.id)===(null==t?void 0:t.id)&&o.client.authStore.save(o.client.authStore.token,t),t}))},AdminService.prototype.delete=function(e,i){var n=this;return void 0===i&&(i={}),t.prototype.delete.call(this,e,i).then((function(t){var i,o;return t&&n.client.authStore.model&&void 0===(null===(i=n.client.authStore.model)||void 0===i?void 0:i.collectionId)&&(null===(o=n.client.authStore.model)||void 0===o?void 0:o.id)===e&&n.client.authStore.clear(),t}))},AdminService.prototype.authResponse=function(t){var e=this.decode((null==t?void 0:t.admin)||{});return(null==t?void 0:t.token)&&(null==t?void 0:t.admin)&&this.client.authStore.save(t.token,e),Object.assign({},t,{token:(null==t?void 0:t.token)||"",admin:e})},AdminService.prototype.authWithPassword=function(t,e,i,n){return void 0===i&&(i={}),void 0===n&&(n={}),i=Object.assign({identity:t,password:e},i),this.client.send(this.baseCrudPath+"/auth-with-password",{method:"POST",params:n,body:i}).then(this.authResponse.bind(this))},AdminService.prototype.authRefresh=function(t,e){return void 0===t&&(t={}),void 0===e&&(e={}),this.client.send(this.baseCrudPath+"/auth-refresh",{method:"POST",params:e,body:t}).then(this.authResponse.bind(this))},AdminService.prototype.requestPasswordReset=function(t,e,i){return void 0===e&&(e={}),void 0===i&&(i={}),e=Object.assign({email:t},e),this.client.send(this.baseCrudPath+"/request-password-reset",{method:"POST",params:i,body:e}).then((function(){return!0}))},AdminService.prototype.confirmPasswordReset=function(t,e,i,n,o){return void 0===n&&(n={}),void 0===o&&(o={}),n=Object.assign({token:t,password:e,passwordConfirm:i},n),this.client.send(this.baseCrudPath+"/confirm-password-reset",{method:"POST",params:o,body:n}).then((function(){return!0}))},AdminService}(d),v=function(t){function ExternalAuth(){return null!==t&&t.apply(this,arguments)||this}return __extends(ExternalAuth,t),ExternalAuth.prototype.$load=function(e){t.prototype.$load.call(this,e),this.recordId="string"==typeof e.recordId?e.recordId:"",this.collectionId="string"==typeof e.collectionId?e.collectionId:"",this.provider="string"==typeof e.provider?e.provider:"",this.providerId="string"==typeof e.providerId?e.providerId:""},ExternalAuth}(n),m=function(t){function RecordService(e,i){var n=t.call(this,e)||this;return n.collectionIdOrName=i,n}return __extends(RecordService,t),RecordService.prototype.decode=function(t){return new o(t)},Object.defineProperty(RecordService.prototype,"baseCrudPath",{get:function(){return this.baseCollectionPath+"/records"},enumerable:!1,configurable:!0}),Object.defineProperty(RecordService.prototype,"baseCollectionPath",{get:function(){return"/api/collections/"+encodeURIComponent(this.collectionIdOrName)},enumerable:!1,configurable:!0}),RecordService.prototype.subscribeOne=function(t,e){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(i){return console.warn("PocketBase: subscribeOne(recordId, callback) is deprecated. Please replace it with subscribe(recordId, callback)."),[2,this.client.realtime.subscribe(this.collectionIdOrName+"/"+t,e)]}))}))},RecordService.prototype.subscribe=function(t,e){return __awaiter(this,void 0,void 0,(function(){var i;return __generator(this,(function(n){if("function"==typeof t)return console.warn("PocketBase: subscribe(callback) is deprecated. Please replace it with subscribe('*', callback)."),[2,this.client.realtime.subscribe(this.collectionIdOrName,t)];if(!e)throw new Error("Missing subscription callback.");if(""===t)throw new Error("Missing topic.");return i=this.collectionIdOrName,"*"!==t&&(i+="/"+t),[2,this.client.realtime.subscribe(i,e)]}))}))},RecordService.prototype.unsubscribe=function(t){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){return"*"===t?[2,this.client.realtime.unsubscribe(this.collectionIdOrName)]:t?[2,this.client.realtime.unsubscribe(this.collectionIdOrName+"/"+t)]:[2,this.client.realtime.unsubscribeByPrefix(this.collectionIdOrName)]}))}))},RecordService.prototype.getFullList=function(e,i){if("number"==typeof e)return t.prototype.getFullList.call(this,e,i);var n=Object.assign({},e,i);return t.prototype.getFullList.call(this,n)},RecordService.prototype.getList=function(e,i,n){return void 0===e&&(e=1),void 0===i&&(i=30),void 0===n&&(n={}),t.prototype.getList.call(this,e,i,n)},RecordService.prototype.getFirstListItem=function(e,i){return void 0===i&&(i={}),t.prototype.getFirstListItem.call(this,e,i)},RecordService.prototype.getOne=function(e,i){return void 0===i&&(i={}),t.prototype.getOne.call(this,e,i)},RecordService.prototype.create=function(e,i){return void 0===e&&(e={}),void 0===i&&(i={}),t.prototype.create.call(this,e,i)},RecordService.prototype.update=function(e,i,n){var o=this;return void 0===i&&(i={}),void 0===n&&(n={}),t.prototype.update.call(this,e,i,n).then((function(t){var e,i,n;return(null===(e=o.client.authStore.model)||void 0===e?void 0:e.id)!==(null==t?void 0:t.id)||(null===(i=o.client.authStore.model)||void 0===i?void 0:i.collectionId)!==o.collectionIdOrName&&(null===(n=o.client.authStore.model)||void 0===n?void 0:n.collectionName)!==o.collectionIdOrName||o.client.authStore.save(o.client.authStore.token,t),t}))},RecordService.prototype.delete=function(e,i){var n=this;return void 0===i&&(i={}),t.prototype.delete.call(this,e,i).then((function(t){var i,o,r;return!t||(null===(i=n.client.authStore.model)||void 0===i?void 0:i.id)!==e||(null===(o=n.client.authStore.model)||void 0===o?void 0:o.collectionId)!==n.collectionIdOrName&&(null===(r=n.client.authStore.model)||void 0===r?void 0:r.collectionName)!==n.collectionIdOrName||n.client.authStore.clear(),t}))},RecordService.prototype.authResponse=function(t){var e=this.decode((null==t?void 0:t.record)||{});return this.client.authStore.save(null==t?void 0:t.token,e),Object.assign({},t,{token:(null==t?void 0:t.token)||"",record:e})},RecordService.prototype.listAuthMethods=function(t){return void 0===t&&(t={}),this.client.send(this.baseCollectionPath+"/auth-methods",{method:"GET",params:t}).then((function(t){return Object.assign({},t,{usernamePassword:!!(null==t?void 0:t.usernamePassword),emailPassword:!!(null==t?void 0:t.emailPassword),authProviders:Array.isArray(null==t?void 0:t.authProviders)?null==t?void 0:t.authProviders:[]})}))},RecordService.prototype.authWithPassword=function(t,e,i,n){var o=this;return void 0===i&&(i={}),void 0===n&&(n={}),i=Object.assign({identity:t,password:e},i),this.client.send(this.baseCollectionPath+"/auth-with-password",{method:"POST",params:n,body:i}).then((function(t){return o.authResponse(t)}))},RecordService.prototype.authWithOAuth2Code=function(t,e,i,n,o,r,a){var s=this;return void 0===o&&(o={}),void 0===r&&(r={}),void 0===a&&(a={}),r=Object.assign({provider:t,code:e,codeVerifier:i,redirectUrl:n,createData:o},r),this.client.send(this.baseCollectionPath+"/auth-with-oauth2",{method:"POST",params:a,body:r}).then((function(t){return s.authResponse(t)}))},RecordService.prototype.authWithOAuth2=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return __awaiter(this,void 0,void 0,(function(){var i,n,o,r,a=this;return __generator(this,(function(s){switch(s.label){case 0:return t.length>1||"string"==typeof(null==t?void 0:t[0])?(console.warn("PocketBase: This form of authWithOAuth2() is deprecated and may get removed in the future. Please replace with authWithOAuth2Code() OR use the authWithOAuth2() realtime form as shown in https://pocketbase.io/docs/authentication/#oauth2-integration."),[2,this.authWithOAuth2Code((null==t?void 0:t[0])||"",(null==t?void 0:t[1])||"",(null==t?void 0:t[2])||"",(null==t?void 0:t[3])||"",(null==t?void 0:t[4])||{},(null==t?void 0:t[5])||{},(null==t?void 0:t[6])||{})]):(i=(null==t?void 0:t[0])||{},[4,this.listAuthMethods()]);case 1:if(n=s.sent(),!(o=n.authProviders.find((function(t){return t.name===i.provider}))))throw new e(new Error('Missing or invalid provider "'.concat(i.provider,'".')));return r=this.client.buildUrl("/api/oauth2-redirect"),[2,new Promise((function(t,n){return __awaiter(a,void 0,void 0,(function(){var a,s,c,l,p=this;return __generator(this,(function(u){switch(u.label){case 0:return u.trys.push([0,3,,4]),[4,this.client.realtime.subscribe("@oauth2",(function(s){return __awaiter(p,void 0,void 0,(function(){var c,l,p;return __generator(this,(function(u){switch(u.label){case 0:c=this.client.realtime.clientId,u.label=1;case 1:if(u.trys.push([1,3,,4]),a(),!s.state||c!==s.state)throw new Error("State parameters don't match.");return[4,this.authWithOAuth2Code(o.name,s.code,o.codeVerifier,r,i.createData,i.body,i.query)];case 2:return l=u.sent(),t(l),[3,4];case 3:return p=u.sent(),n(new e(p)),[3,4];case 4:return[2]}}))}))}))];case 1:return a=u.sent(),(s=new URL(o.authUrl+r)).searchParams.set("state",this.client.realtime.clientId),(null===(l=i.scopes)||void 0===l?void 0:l.length)&&s.searchParams.set("scope",i.scopes.join(" ")),[4,i.urlCallback?i.urlCallback(s.toString()):this._defaultUrlCallback(s.toString())];case 2:return u.sent(),[3,4];case 3:return c=u.sent(),n(new e(c)),[3,4];case 4:return[2]}}))}))}))]}}))}))},RecordService.prototype.authRefresh=function(t,e){var i=this;return void 0===t&&(t={}),void 0===e&&(e={}),this.client.send(this.baseCollectionPath+"/auth-refresh",{method:"POST",params:e,body:t}).then((function(t){return i.authResponse(t)}))},RecordService.prototype.requestPasswordReset=function(t,e,i){return void 0===e&&(e={}),void 0===i&&(i={}),e=Object.assign({email:t},e),this.client.send(this.baseCollectionPath+"/request-password-reset",{method:"POST",params:i,body:e}).then((function(){return!0}))},RecordService.prototype.confirmPasswordReset=function(t,e,i,n,o){return void 0===n&&(n={}),void 0===o&&(o={}),n=Object.assign({token:t,password:e,passwordConfirm:i},n),this.client.send(this.baseCollectionPath+"/confirm-password-reset",{method:"POST",params:o,body:n}).then((function(){return!0}))},RecordService.prototype.requestVerification=function(t,e,i){return void 0===e&&(e={}),void 0===i&&(i={}),e=Object.assign({email:t},e),this.client.send(this.baseCollectionPath+"/request-verification",{method:"POST",params:i,body:e}).then((function(){return!0}))},RecordService.prototype.confirmVerification=function(t,e,i){return void 0===e&&(e={}),void 0===i&&(i={}),e=Object.assign({token:t},e),this.client.send(this.baseCollectionPath+"/confirm-verification",{method:"POST",params:i,body:e}).then((function(){return!0}))},RecordService.prototype.requestEmailChange=function(t,e,i){return void 0===e&&(e={}),void 0===i&&(i={}),e=Object.assign({newEmail:t},e),this.client.send(this.baseCollectionPath+"/request-email-change",{method:"POST",params:i,body:e}).then((function(){return!0}))},RecordService.prototype.confirmEmailChange=function(t,e,i,n){return void 0===i&&(i={}),void 0===n&&(n={}),i=Object.assign({token:t,password:e},i),this.client.send(this.baseCollectionPath+"/confirm-email-change",{method:"POST",params:n,body:i}).then((function(){return!0}))},RecordService.prototype.listExternalAuths=function(t,e){return void 0===e&&(e={}),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(t)+"/external-auths",{method:"GET",params:e}).then((function(t){var e=[];if(Array.isArray(t))for(var i=0,n=t;i<n.length;i++){var o=n[i];e.push(new v(o))}return e}))},RecordService.prototype.unlinkExternalAuth=function(t,e,i){return void 0===i&&(i={}),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(t)+"/external-auths/"+encodeURIComponent(e),{method:"DELETE",params:i}).then((function(){return!0}))},RecordService.prototype._defaultUrlCallback=function(t){if("undefined"==typeof window||!(null===window||void 0===window?void 0:window.open))throw new e(new Error("Not in a browser context - please pass a custom urlCallback function."));var i=1024,n=768,o=window.innerWidth,r=window.innerHeight,a=o/2-(i=i>o?o:i)/2,s=r/2-(n=n>r?r:n)/2;window.open(t,"oauth2-popup","width="+i+",height="+n+",top="+s+",left="+a+",resizable,menubar=no")},RecordService}(d),f=function f(t){void 0===t&&(t={}),this.id=void 0!==t.id?t.id:"",this.name=void 0!==t.name?t.name:"",this.type=void 0!==t.type?t.type:"text",this.system=!!t.system,this.required=!!t.required,this.options="object"==typeof t.options&&null!==t.options?t.options:{}},g=function(t){function Collection(){return null!==t&&t.apply(this,arguments)||this}return __extends(Collection,t),Collection.prototype.$load=function(e){t.prototype.$load.call(this,e),this.system=!!e.system,this.name="string"==typeof e.name?e.name:"",this.type="string"==typeof e.type?e.type:"base",this.options=void 0!==e.options&&null!==e.options?e.options:{},this.indexes=Array.isArray(e.indexes)?e.indexes:[],this.listRule="string"==typeof e.listRule?e.listRule:null,this.viewRule="string"==typeof e.viewRule?e.viewRule:null,this.createRule="string"==typeof e.createRule?e.createRule:null,this.updateRule="string"==typeof e.updateRule?e.updateRule:null,this.deleteRule="string"==typeof e.deleteRule?e.deleteRule:null,e.schema=Array.isArray(e.schema)?e.schema:[],this.schema=[];for(var i=0,n=e.schema;i<n.length;i++){var o=n[i];this.schema.push(new f(o))}},Object.defineProperty(Collection.prototype,"isBase",{get:function(){return this.$isBase},enumerable:!1,configurable:!0}),Object.defineProperty(Collection.prototype,"$isBase",{get:function(){return"base"===this.type},enumerable:!1,configurable:!0}),Object.defineProperty(Collection.prototype,"isAuth",{get:function(){return this.$isAuth},enumerable:!1,configurable:!0}),Object.defineProperty(Collection.prototype,"$isAuth",{get:function(){return"auth"===this.type},enumerable:!1,configurable:!0}),Object.defineProperty(Collection.prototype,"isView",{get:function(){return this.$isView},enumerable:!1,configurable:!0}),Object.defineProperty(Collection.prototype,"$isView",{get:function(){return"view"===this.type},enumerable:!1,configurable:!0}),Collection}(n),b=function(t){function CollectionService(){return null!==t&&t.apply(this,arguments)||this}return __extends(CollectionService,t),CollectionService.prototype.decode=function(t){return new g(t)},Object.defineProperty(CollectionService.prototype,"baseCrudPath",{get:function(){return"/api/collections"},enumerable:!1,configurable:!0}),CollectionService.prototype.import=function(t,e,i){return void 0===e&&(e=!1),void 0===i&&(i={}),__awaiter(this,void 0,void 0,(function(){return __generator(this,(function(n){return[2,this.client.send(this.baseCrudPath+"/import",{method:"PUT",params:i,body:{collections:t,deleteMissing:e}}).then((function(){return!0}))]}))}))},CollectionService}(d),y=function(t){function LogRequest(){return null!==t&&t.apply(this,arguments)||this}return __extends(LogRequest,t),LogRequest.prototype.$load=function(e){t.prototype.$load.call(this,e),e.remoteIp=e.remoteIp||e.ip,this.url="string"==typeof e.url?e.url:"",this.method="string"==typeof e.method?e.method:"GET",this.status="number"==typeof e.status?e.status:200,this.auth="string"==typeof e.auth?e.auth:"guest",this.remoteIp="string"==typeof e.remoteIp?e.remoteIp:"",this.userIp="string"==typeof e.userIp?e.userIp:"",this.referer="string"==typeof e.referer?e.referer:"",this.userAgent="string"==typeof e.userAgent?e.userAgent:"",this.meta="object"==typeof e.meta&&null!==e.meta?e.meta:{}},LogRequest}(n),x=function(t){function LogService(){return null!==t&&t.apply(this,arguments)||this}return __extends(LogService,t),LogService.prototype.getRequestsList=function(t,e,i){return void 0===t&&(t=1),void 0===e&&(e=30),void 0===i&&(i={}),i=Object.assign({page:t,perPage:e},i),this.client.send("/api/logs/requests",{method:"GET",params:i}).then((function(t){var e=[];if(null==t?void 0:t.items){t.items=(null==t?void 0:t.items)||[];for(var i=0,n=t.items;i<n.length;i++){var o=n[i];e.push(new y(o))}}return new p((null==t?void 0:t.page)||1,(null==t?void 0:t.perPage)||0,(null==t?void 0:t.totalItems)||0,(null==t?void 0:t.totalPages)||0,e)}))},LogService.prototype.getRequest=function(t,e){return void 0===e&&(e={}),this.client.send("/api/logs/requests/"+encodeURIComponent(t),{method:"GET",params:e}).then((function(t){return new y(t)}))},LogService.prototype.getRequestsStats=function(t){return void 0===t&&(t={}),this.client.send("/api/logs/requests/stats",{method:"GET",params:t}).then((function(t){return t}))},LogService}(c),w=function(t){function RealtimeService(){var e=null!==t&&t.apply(this,arguments)||this;return e.clientId="",e.eventSource=null,e.subscriptions={},e.lastSentTopics=[],e.maxConnectTimeout=15e3,e.reconnectAttempts=0,e.maxReconnectAttempts=1/0,e.predefinedReconnectIntervals=[200,300,500,1e3,1200,1500,2e3],e.pendingConnects=[],e}return __extends(RealtimeService,t),Object.defineProperty(RealtimeService.prototype,"isConnected",{get:function(){return!!this.eventSource&&!!this.clientId&&!this.pendingConnects.length},enumerable:!1,configurable:!0}),RealtimeService.prototype.subscribe=function(t,e){var i;return __awaiter(this,void 0,void 0,(function(){var n,o=this;return __generator(this,(function(r){switch(r.label){case 0:if(!t)throw new Error("topic must be set.");return n=function(t){var i,n=t;try{i=JSON.parse(null==n?void 0:n.data)}catch(t){}e(i||{})},this.subscriptions[t]||(this.subscriptions[t]=[]),this.subscriptions[t].push(n),this.isConnected?[3,2]:[4,this.connect()];case 1:return r.sent(),[3,5];case 2:return 1!==this.subscriptions[t].length?[3,4]:[4,this.submitSubscriptions()];case 3:return r.sent(),[3,5];case 4:null===(i=this.eventSource)||void 0===i||i.addEventListener(t,n),r.label=5;case 5:return[2,function(){return __awaiter(o,void 0,void 0,(function(){return __generator(this,(function(e){return[2,this.unsubscribeByTopicAndListener(t,n)]}))}))}]}}))}))},RealtimeService.prototype.unsubscribe=function(t){var e;return __awaiter(this,void 0,void 0,(function(){var i,n,o;return __generator(this,(function(r){switch(r.label){case 0:if(!this.hasSubscriptionListeners(t))return[2];if(t){for(i=0,n=this.subscriptions[t];i<n.length;i++)o=n[i],null===(e=this.eventSource)||void 0===e||e.removeEventListener(t,o);delete this.subscriptions[t]}else this.subscriptions={};return this.hasSubscriptionListeners()?[3,1]:(this.disconnect(),[3,3]);case 1:return this.hasSubscriptionListeners(t)?[3,3]:[4,this.submitSubscriptions()];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))},RealtimeService.prototype.unsubscribeByPrefix=function(t){var e;return __awaiter(this,void 0,void 0,(function(){var i,n,o,r,a;return __generator(this,(function(s){switch(s.label){case 0:for(n in i=!1,this.subscriptions)if(n.startsWith(t)){for(i=!0,o=0,r=this.subscriptions[n];o<r.length;o++)a=r[o],null===(e=this.eventSource)||void 0===e||e.removeEventListener(n,a);delete this.subscriptions[n]}return i?this.hasSubscriptionListeners()?[4,this.submitSubscriptions()]:[3,2]:[2];case 1:return s.sent(),[3,3];case 2:this.disconnect(),s.label=3;case 3:return[2]}}))}))},RealtimeService.prototype.unsubscribeByTopicAndListener=function(t,e){var i;return __awaiter(this,void 0,void 0,(function(){var n,o;return __generator(this,(function(r){switch(r.label){case 0:if(!Array.isArray(this.subscriptions[t])||!this.subscriptions[t].length)return[2];for(n=!1,o=this.subscriptions[t].length-1;o>=0;o--)this.subscriptions[t][o]===e&&(n=!0,delete this.subscriptions[t][o],this.subscriptions[t].splice(o,1),null===(i=this.eventSource)||void 0===i||i.removeEventListener(t,e));return n?(this.subscriptions[t].length||delete this.subscriptions[t],this.hasSubscriptionListeners()?[3,1]:(this.disconnect(),[3,3])):[2];case 1:return this.hasSubscriptionListeners(t)?[3,3]:[4,this.submitSubscriptions()];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))},RealtimeService.prototype.hasSubscriptionListeners=function(t){var e,i;if(this.subscriptions=this.subscriptions||{},t)return!!(null===(e=this.subscriptions[t])||void 0===e?void 0:e.length);for(var n in this.subscriptions)if(null===(i=this.subscriptions[n])||void 0===i?void 0:i.length)return!0;return!1},RealtimeService.prototype.submitSubscriptions=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){return this.clientId?(this.addAllSubscriptionListeners(),this.lastSentTopics=this.getNonEmptySubscriptionTopics(),[2,this.client.send("/api/realtime",{method:"POST",body:{clientId:this.clientId,subscriptions:this.lastSentTopics},params:{$cancelKey:"realtime_"+this.clientId}}).catch((function(t){if(!(null==t?void 0:t.isAbort))throw t}))]):[2]}))}))},RealtimeService.prototype.getNonEmptySubscriptionTopics=function(){var t=[];for(var e in this.subscriptions)this.subscriptions[e].length&&t.push(e);return t},RealtimeService.prototype.addAllSubscriptionListeners=function(){if(this.eventSource)for(var t in this.removeAllSubscriptionListeners(),this.subscriptions)for(var e=0,i=this.subscriptions[t];e<i.length;e++){var n=i[e];this.eventSource.addEventListener(t,n)}},RealtimeService.prototype.removeAllSubscriptionListeners=function(){if(this.eventSource)for(var t in this.subscriptions)for(var e=0,i=this.subscriptions[t];e<i.length;e++){var n=i[e];this.eventSource.removeEventListener(t,n)}},RealtimeService.prototype.connect=function(){return __awaiter(this,void 0,void 0,(function(){var t=this;return __generator(this,(function(e){return this.reconnectAttempts>0?[2]:[2,new Promise((function(e,i){t.pendingConnects.push({resolve:e,reject:i}),t.pendingConnects.length>1||t.initConnect()}))]}))}))},RealtimeService.prototype.initConnect=function(){var t=this;this.disconnect(!0),clearTimeout(this.connectTimeoutId),this.connectTimeoutId=setTimeout((function(){t.connectErrorHandler(new Error("EventSource connect took too long."))}),this.maxConnectTimeout),this.eventSource=new EventSource(this.client.buildUrl("/api/realtime")),this.eventSource.onerror=function(e){t.connectErrorHandler(new Error("Failed to establish realtime connection."))},this.eventSource.addEventListener("PB_CONNECT",(function(e){var i=e;t.clientId=null==i?void 0:i.lastEventId,t.submitSubscriptions().then((function(){return __awaiter(t,void 0,void 0,(function(){var t;return __generator(this,(function(e){switch(e.label){case 0:t=3,e.label=1;case 1:return this.hasUnsentSubscriptions()&&t>0?(t--,[4,this.submitSubscriptions()]):[3,3];case 2:return e.sent(),[3,1];case 3:return[2]}}))}))})).then((function(){for(var e=0,i=t.pendingConnects;e<i.length;e++){i[e].resolve()}t.pendingConnects=[],t.reconnectAttempts=0,clearTimeout(t.reconnectTimeoutId),clearTimeout(t.connectTimeoutId)})).catch((function(e){t.clientId="",t.connectErrorHandler(e)}))}))},RealtimeService.prototype.hasUnsentSubscriptions=function(){var t=this.getNonEmptySubscriptionTopics();if(t.length!=this.lastSentTopics.length)return!0;for(var e=0,i=t;e<i.length;e++){var n=i[e];if(!this.lastSentTopics.includes(n))return!0}return!1},RealtimeService.prototype.connectErrorHandler=function(t){var i=this;if(clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),!this.clientId&&!this.reconnectAttempts||this.reconnectAttempts>this.maxReconnectAttempts){for(var n=0,o=this.pendingConnects;n<o.length;n++){o[n].reject(new e(t))}this.disconnect()}else{this.disconnect(!0);var r=this.predefinedReconnectIntervals[this.reconnectAttempts]||this.predefinedReconnectIntervals[this.predefinedReconnectIntervals.length-1];this.reconnectAttempts++,this.reconnectTimeoutId=setTimeout((function(){i.initConnect()}),r)}},RealtimeService.prototype.disconnect=function(t){var i;if(void 0===t&&(t=!1),clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),this.removeAllSubscriptionListeners(),null===(i=this.eventSource)||void 0===i||i.close(),this.eventSource=null,this.clientId="",!t){this.reconnectAttempts=0;for(var n=new e(new Error("Realtime disconnected.")),o=0,r=this.pendingConnects;o<r.length;o++){r[o].reject(n)}this.pendingConnects=[]}},RealtimeService}(c),S=function(t){function HealthService(){return null!==t&&t.apply(this,arguments)||this}return __extends(HealthService,t),HealthService.prototype.check=function(t){return void 0===t&&(t={}),this.client.send("/api/health",{method:"GET",params:t})},HealthService}(c),C=function(t){function FileService(){return null!==t&&t.apply(this,arguments)||this}return __extends(FileService,t),FileService.prototype.getUrl=function(t,e,i){void 0===i&&(i={});var n=[];n.push("api"),n.push("files"),n.push(encodeURIComponent(t.collectionId||t.collectionName)),n.push(encodeURIComponent(t.id)),n.push(encodeURIComponent(e));var o=this.client.buildUrl(n.join("/"));if(Object.keys(i).length){var r=Object.entries(i).map((function(t){var e=t[0],i=t[1];return"".concat(e,"=").concat(encodeURIComponent(i))})).join("&");o+=(o.includes("?")?"&":"?")+r}return o},FileService.prototype.getToken=function(t){return void 0===t&&(t={}),this.client.send("/api/files/token",{method:"POST",params:t}).then((function(t){return(null==t?void 0:t.token)||""}))},FileService}(c),_=function(t){function BackupService(){return null!==t&&t.apply(this,arguments)||this}return __extends(BackupService,t),BackupService.prototype.getFullList=function(t){return void 0===t&&(t={}),this.client.send("/api/backups",{method:"GET",params:t})},BackupService.prototype.create=function(t,e){void 0===e&&(e={});var i={name:t};return this.client.send("/api/backups",{method:"POST",params:e,body:i}).then((function(){return!0}))},BackupService.prototype.delete=function(t,e){return void 0===e&&(e={}),this.client.send("/api/backups/".concat(encodeURIComponent(t)),{method:"DELETE",params:e}).then((function(){return!0}))},BackupService.prototype.restore=function(t,e){return void 0===e&&(e={}),this.client.send("/api/backups/".concat(encodeURIComponent(t),"/restore"),{method:"POST",params:e}).then((function(){return!0}))},BackupService.prototype.getDownloadUrl=function(t,e){return this.client.buildUrl("/api/backups/".concat(encodeURIComponent(e),"?token=").concat(encodeURIComponent(t)))},BackupService}(c),k=function(){function CustomFormData(){this.fileManager=wx.getFileSystemManager(),this.data={},this.files=[]}return CustomFormData.prototype.append=function(t,e){return this.data[t]=e,!0},CustomFormData.prototype.appendFile=function(t,e,i){var n=this.fileManager.readFileSync(e);return!(Object.prototype.toString.call(n).indexOf("ArrayBuffer")<0)&&(i||(i=this.getFileNameFromPath(e)),this.files.push({name:t,buffer:n,fileName:i}),!0)},CustomFormData.prototype.getData=function(){return this.convert(this.data,this.files)},CustomFormData.prototype.convert=function(t,e){var i="wxmpFormBoundary"+this.randString(),n="--"+i,o=n+"--",r=[];if(t&&"[object Object]"==Object.prototype.toString.call(t))for(var a in t)r=r.concat(this.formDataArray(n,a,t[a]));if(e&&"[object Array]"==Object.prototype.toString.call(e))for(var s in e){var c=e[s];r=r.concat(this.formDataArray(n,c.name,c.buffer,c.fileName))}var l=[];return l.push.apply(l,this.toUtf8Bytes(o)),r=r.concat(l),{contentType:"multipart/form-data; boundary="+i,buffer:new Uint8Array(r).buffer}},CustomFormData.prototype.randString=function(){for(var t="",e="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",i=17;i>0;--i)t+=e[Math.floor(62*Math.random())];return t},CustomFormData.prototype.getFileNameFromPath=function(t){var e=t.lastIndexOf("/");return t.substr(e+1)},CustomFormData.prototype.getFileMime=function(t){var e=t.lastIndexOf("."),i=O[t.substr(e)];return i||"application/octet-stream"},CustomFormData.prototype.formDataArray=function(t,e,i,n){var o="",r=!!n;o+=t+"\r\n",o+='Content-Disposition: form-data; name="'+e+'"',r?(o+='; filename="'+n+'"\r\n',o+="Content-Type: "+this.getFileMime(n)+"\r\n\r\n"):(o+="\r\n\r\n",o+=i);var a=[];if(a.push.apply(a,this.toUtf8Bytes(o)),r){var s=new Uint8Array(i);a=a.concat(Array.prototype.slice.call(s))}return a.push.apply(a,this.toUtf8Bytes("\r")),a.push.apply(a,this.toUtf8Bytes("\n")),a},CustomFormData.prototype.toUtf8Bytes=function(t){for(var e=[],i=0;i<t.length;i++)e.push.apply(e,this.utf8CodeAt(t,i)),t.codePointAt(i)>65535&&i++;return e},CustomFormData.prototype.utf8CodeAt=function(t,e){var i=[],n=0,o=t.charCodeAt(e);return o<128?i[n++]=o:o<2048?(i[n++]=o>>6|192,i[n++]=63&o|128):55296==(64512&o)&&e+1<t.length&&56320==(64512&t.charCodeAt(e+1))?(o=65536+((1023&o)<<10)+(1023&t.charCodeAt(++e)),i[n++]=o>>18|240,i[n++]=o>>12&63|128,i[n++]=o>>6&63|128,i[n++]=63&o|128):(i[n++]=o>>12|224,i[n++]=o>>6&63|128,i[n++]=63&o|128),i},CustomFormData}(),O={.001:"application/x-001",.323:"text/h323",.907:"drawing/907",".acp":"audio/x-mei-aac",".aif":"audio/aiff",".aiff":"audio/aiff",".asa":"text/asa",".asp":"text/asp",".au":"audio/basic",".awf":"application/vnd.adobe.workflow",".bmp":"application/x-bmp",".c4t":"application/x-c4t",".cal":"application/x-cals",".cdf":"application/x-netcdf",".cel":"application/x-cel",".cg4":"application/x-g4",".cit":"application/x-cit",".cml":"text/xml",".cmx":"application/x-cmx",".crl":"application/pkix-crl",".csi":"application/x-csi",".cut":"application/x-cut",".dbm":"application/x-dbm",".dcd":"text/xml",".der":"application/x-x509-ca-cert",".dib":"application/x-dib",".doc":"application/msword",".drw":"application/x-drw",".dwf":"Model/vnd.dwf",".dwg":"application/x-dwg",".dxf":"application/x-dxf",".emf":"application/x-emf",".ent":"text/xml",".eps":"application/x-ps",".etd":"application/x-ebx",".fax":"image/fax",".fif":"application/fractals",".frm":"application/x-frm",".gbr":"application/x-gbr",".gif":"image/gif",".gp4":"application/x-gp4",".hmr":"application/x-hmr",".hpl":"application/x-hpl",".hrf":"application/x-hrf",".htc":"text/x-component",".html":"text/html",".htx":"text/html",".ico":"image/x-icon",".iff":"application/x-iff",".igs":"application/x-igs",".img":"application/x-img",".isp":"application/x-internet-signup",".java":"java/*",".jpe":"image/jpeg",".jpeg":"image/jpeg",".jsp":"text/html",".lar":"application/x-laplayer-reg",".lavs":"audio/x-liquid-secure",".lmsff":"audio/x-la-lms",".ltr":"application/x-ltr",".m2v":"video/x-mpeg",".m4e":"video/mpeg4",".man":"application/x-troff-man",".mdb":"application/msaccess",".mfp":"application/x-shockwave-flash",".mhtml":"message/rfc822",".mid":"audio/mid",".mil":"application/x-mil",".mnd":"audio/x-musicnet-download",".mocha":"application/x-javascript",".mp1":"audio/mp1",".mp2v":"video/mpeg",".mp4":"video/mpeg4",".mpd":"application/vnd.ms-project",".mpeg":"video/mpg",".mpga":"audio/rn-mpeg",".mps":"video/x-mpeg",".mpv":"video/mpg",".mpw":"application/vnd.ms-project",".mtx":"text/xml",".net":"image/pnetvue",".nws":"message/rfc822",".out":"application/x-out",".p12":"application/x-pkcs12",".p7c":"application/pkcs7-mime",".p7r":"application/x-pkcs7-certreqresp",".pc5":"application/x-pc5",".pcl":"application/x-pcl",".pdf":"application/pdf",".pdx":"application/vnd.adobe.pdx",".pgl":"application/x-pgl",".pko":"application/vnd.ms-pki.pko",".plg":"text/html",".plt":"application/x-plt",".ppa":"application/vnd.ms-powerpoint",".pps":"application/vnd.ms-powerpoint",".ppt":"application/x-ppt",".prf":"application/pics-rules",".prt":"application/x-prt",".ps":"application/postscript",".pwz":"application/vnd.ms-powerpoint",".ra":"audio/vnd.rn-realaudio",".ras":"application/x-ras",".rdf":"text/xml",".red":"application/x-red",".rjs":"application/vnd.rn-realsystem-rjs",".rlc":"application/x-rlc",".rm":"application/vnd.rn-realmedia",".rmi":"audio/mid",".rmm":"audio/x-pn-realaudio",".rms":"application/vnd.rn-realmedia-secure",".rmx":"application/vnd.rn-realsystem-rmx",".rp":"image/vnd.rn-realpix",".rsml":"application/vnd.rn-rsml",".rtf":"application/msword",".rv":"video/vnd.rn-realvideo",".sat":"application/x-sat",".sdw":"application/x-sdw",".slb":"application/x-slb",".slk":"drawing/x-slk",".smil":"application/smil",".snd":"audio/basic",".sor":"text/plain",".spl":"application/futuresplash",".ssm":"application/streamingmedia",".stl":"application/vnd.ms-pki.stl",".sty":"application/x-sty",".swf":"application/x-shockwave-flash",".tg4":"application/x-tg4",".tif":"image/tiff",".tiff":"image/tiff",".top":"drawing/x-top",".tsd":"text/xml",".uin":"application/x-icq",".vcf":"text/x-vcard",".vdx":"application/vnd.visio",".vpg":"application/x-vpeg005",".vsd":"application/x-vsd",".vst":"application/vnd.visio",".vsw":"application/vnd.visio",".vtx":"application/vnd.visio",".wav":"audio/wav",".wb1":"application/x-wb1",".wb3":"application/x-wb3",".wiz":"application/msword",".wk4":"application/x-wk4",".wks":"application/x-wks",".wma":"audio/x-ms-wma",".wmf":"application/x-wmf",".wmv":"video/x-ms-wmv",".wmz":"application/x-ms-wmz",".wpd":"application/x-wpd",".wpl":"application/vnd.ms-wpl",".wr1":"application/x-wr1",".wrk":"application/x-wrk",".ws2":"application/x-ws",".wsdl":"text/xml",".xdp":"application/vnd.adobe.xdp",".xfd":"application/vnd.adobe.xfd",".xhtml":"text/html",".xls":"application/x-xls",".xml":"text/xml",".xq":"text/xml",".xquery":"text/xml",".xsl":"text/xml",".xwd":"application/x-xwd",".sis":"application/vnd.symbian.install",".x_t":"application/x-x_t",".apk":"application/vnd.android.package-archive",.301:"application/x-301",.906:"application/x-906",".a11":"application/x-a11",".ai":"application/postscript",".aifc":"audio/aiff",".anv":"application/x-anv",".asf":"video/x-ms-asf",".asx":"video/x-ms-asf",".avi":"video/avi",".biz":"text/xml",".bot":"application/x-bot",".c90":"application/x-c90",".cat":"application/vnd.ms-pki.seccat",".cdr":"application/x-cdr",".cer":"application/x-x509-ca-cert",".cgm":"application/x-cgm",".class":"java/*",".cmp":"application/x-cmp",".cot":"application/x-cot",".crt":"application/x-x509-ca-cert",".css":"text/css",".dbf":"application/x-dbf",".dbx":"application/x-dbx",".dcx":"application/x-dcx",".dgn":"application/x-dgn",".dll":"application/x-msdownload",".dot":"application/msword",".dtd":"text/xml",".dxb":"application/x-dxb",".edn":"application/vnd.adobe.edn",".eml":"message/rfc822",".epi":"application/x-epi",".exe":"application/x-msdownload",".fdf":"application/vnd.fdf",".fo":"text/xml",".g4":"application/x-g4",".gl2":"application/x-gl2",".hgl":"application/x-hgl",".hpg":"application/x-hpgl",".hqx":"application/mac-binhex40",".hta":"application/hta",".htm":"text/html",".htt":"text/webviewhtml",".icb":"application/x-icb",".ig4":"application/x-g4",".iii":"application/x-iphone",".ins":"application/x-internet-signup",".IVF":"video/x-ivf",".jfif":"image/jpeg",".jpg":"image/jpeg",".js":"application/x-javascript",".la1":"audio/x-liquid-file",".latex":"application/x-latex",".lbm":"application/x-lbm",".ls":"application/x-javascript",".m1v":"video/x-mpeg",".m3u":"audio/mpegurl",".mac":"application/x-mac",".math":"text/xml",".mht":"message/rfc822",".mi":"application/x-mi",".midi":"audio/mid",".mml":"text/xml",".mns":"audio/x-musicnet-stream",".movie":"video/x-sgi-movie",".mp2":"audio/mp2",".mp3":"audio/mp3",".mpa":"video/x-mpg",".mpe":"video/x-mpeg",".mpg":"video/mpg",".mpp":"application/vnd.ms-project",".mpt":"application/vnd.ms-project",".mpv2":"video/mpeg",".mpx":"application/vnd.ms-project",".mxp":"application/x-mmxp",".nrf":"application/x-nrf",".odc":"text/x-ms-odc",".p10":"application/pkcs10",".p7b":"application/x-pkcs7-certificates",".p7m":"application/pkcs7-mime",".p7s":"application/pkcs7-signature",".pci":"application/x-pci",".pcx":"application/x-pcx",".pfx":"application/x-pkcs12",".pic":"application/x-pic",".pl":"application/x-perl",".pls":"audio/scpls",".png":"image/png",".pot":"application/vnd.ms-powerpoint",".ppm":"application/x-ppm",".pr":"application/x-pr",".prn":"application/x-prn",".ptn":"application/x-ptn",".r3t":"text/vnd.rn-realtext3d",".ram":"audio/x-pn-realaudio",".rat":"application/rat-file",".rec":"application/vnd.rn-recording",".rgb":"application/x-rgb",".rjt":"application/vnd.rn-realsystem-rjt",".rle":"application/x-rle",".rmf":"application/vnd.adobe.rmf",".rmj":"application/vnd.rn-realsystem-rmj",".rmp":"application/vnd.rn-rn_music_package",".rmvb":"application/vnd.rn-realmedia-vbr",".rnx":"application/vnd.rn-realplayer",".rpm":"audio/x-pn-realaudio-plugin",".rt":"text/vnd.rn-realtext",".sam":"application/x-sam",".sdp":"application/sdp",".sit":"application/x-stuffit",".sld":"application/x-sld",".smi":"application/smil",".smk":"application/x-smk",".sol":"text/plain",".spc":"application/x-pkcs7-certificates",".spp":"text/xml",".sst":"application/vnd.ms-pki.certstore",".stm":"text/html",".svg":"text/xml",".tdf":"application/x-tdf",".tga":"application/x-tga",".tld":"text/xml",".torrent":"application/x-bittorrent",".txt":"text/plain",".uls":"text/iuls",".vda":"application/x-vda",".vml":"text/xml",".vss":"application/vnd.visio",".vsx":"application/vnd.visio",".vxml":"text/xml",".wax":"audio/x-ms-wax",".wb2":"application/x-wb2",".wbmp":"image/vnd.wap.wbmp",".wk3":"application/x-wk3",".wkq":"application/x-wkq",".wm":"video/x-ms-wm",".wmd":"application/x-ms-wmd",".wml":"text/vnd.wap.wml",".wmx":"video/x-ms-wmx",".wp6":"application/x-wp6",".wpg":"application/x-wpg",".wq1":"application/x-wq1",".wri":"application/x-wri",".ws":"application/x-ws",".wsc":"text/scriptlet",".wvx":"video/x-ms-wvx",".xdr":"text/xml",".xfdf":"application/vnd.adobe.xfdf",".xlw":"application/x-xlw",".xpl":"audio/scpls",".xql":"text/xml",".xsd":"text/xml",".xslt":"text/xml",".x_b":"application/x-x_b",".sisx":"application/vnd.symbian.install",".ipa":"application/vnd.iphone",".xap":"application/x-silverlight-app",".zip":"application/x-zip-compressed"};return function(){function Client(t,e,i){void 0===t&&(t="/"),void 0===i&&(i="en-US"),this.cancelControllers={},this.recordServices={},this.enableAutoCancellation=!1,this.baseUrl=t,this.lang=i,this.authStore=e||new s,this.admins=new h(this),this.collections=new b(this),this.files=new C(this),this.logs=new x(this),this.settings=new l(this),this.realtime=new w(this),this.health=new S(this),this.backups=new _(this)}return Client.prototype.collection=function(t){return this.recordServices[t]||(this.recordServices[t]=new m(this,t)),this.recordServices[t]},Client.prototype.autoCancellation=function(t){return this.enableAutoCancellation=!!t,this},Client.prototype.cancelRequest=function(t){return this.cancelControllers[t]&&(this.cancelControllers[t].abort(),delete this.cancelControllers[t]),this},Client.prototype.cancelAllRequests=function(){for(var t in this.cancelControllers)this.cancelControllers[t].abort();return this.cancelControllers={},this},Client.prototype.send=function(t,i){var n,o,r,a,s,c,l,p;return __awaiter(this,void 0,void 0,(function(){var u,d,h,v,m,f,g,b,y,x,w,S=this;return __generator(this,(function(C){switch(C.label){case 0:return u=Object.assign({method:"GET"},i),this.isCustomFormData(u.body)?(d=u.body.getData(),u.body=d.buffer,u.headers=Object.assign({},u.headers,{"Content-Type":d.contentType})):this.isFormData(u.body)||(u.body&&"string"!=typeof u.body&&(u.body=JSON.stringify(u.body)),void 0===(null===(n=null==u?void 0:u.headers)||void 0===n?void 0:n["Content-Type"])&&(u.headers=Object.assign({},u.headers,{"Content-Type":"application/json"}))),void 0===(null===(o=null==u?void 0:u.headers)||void 0===o?void 0:o["Accept-Language"])&&(u.headers=Object.assign({},u.headers,{"Accept-Language":this.lang})),(null===(r=this.authStore)||void 0===r?void 0:r.token)&&void 0===(null===(a=null==u?void 0:u.headers)||void 0===a?void 0:a.Authorization)&&(u.headers=Object.assign({},u.headers,{Authorization:this.authStore.token})),this.enableAutoCancellation&&!1!==(null===(s=u.params)||void 0===s?void 0:s.$autoCancel)&&(h=(null===(c=u.params)||void 0===c?void 0:c.$cancelKey)||(u.method||"GET")+t,this.cancelRequest(h),v=new AbortController,this.cancelControllers[h]=v,u.signal=v.signal),null===(l=u.params)||void 0===l||delete l.$autoCancel,null===(p=u.params)||void 0===p||delete p.$cancelKey,m=this.buildUrl(t),void 0!==u.params&&((f=this.serializeQueryParams(u.params))&&(m+=(m.includes("?")?"&":"?")+f),delete u.params),this.beforeSend?(y=(b=Object).assign,x=[{}],[4,this.beforeSend(m,u)]):[3,2];case 1:void 0!==(g=y.apply(b,x.concat([C.sent()]))).url||void 0!==g.options?(m=g.url||m,u=g.options||u):Object.keys(g).length&&(u=g,(null===console||void 0===console?void 0:console.warn)&&console.warn("Deprecated format of beforeSend return: please use `return { url, options }`, instead of `return options`.")),C.label=2;case 2:return w=function(t,e){return new Promise((function(i,n){wx.request({url:t,data:e.body,method:e.method,header:e.headers,enableHttp2:!0,enableQuic:!0,success:i,fail:n})}))},[2,w(m,u).then((function(t){return __awaiter(S,void 0,void 0,(function(){var i;return __generator(this,(function(n){switch(n.label){case 0:return i=t.data,this.afterSend?[4,this.afterSend(t,i)]:[3,2];case 1:i=n.sent(),n.label=2;case 2:if(t.statusCode>=400)throw new e({url:t.url,status:t.statusCode,data:i});return[2,i]}}))}))})).catch((function(t){throw new e(t)}))]}}))}))},Client.prototype.getFileUrl=function(t,e,i){return void 0===i&&(i={}),this.files.getUrl(t,e,i)},Client.prototype.buildUrl=function(t){var e,i=this.baseUrl;return"undefined"==typeof window||!window.location||i.startsWith("https://")||i.startsWith("http://")||(i=(null===(e=window.location.origin)||void 0===e?void 0:e.endsWith("/"))?window.location.origin.substring(0,window.location.origin.length-1):window.location.origin||"",this.baseUrl.startsWith("/")||(i+=window.location.pathname||"/",i+=i.endsWith("/")?"":"/"),i+=this.baseUrl),t&&(i+=i.endsWith("/")?"":"/",i+=t.startsWith("/")?t.substring(1):t),i},Client.prototype.isFormData=function(t){return t&&("FormData"===t.constructor.name||"undefined"!=typeof FormData&&t instanceof FormData)},Client.prototype.isCustomFormData=function(t){return t&&t instanceof k},Client.prototype.serializeQueryParams=function(t){var e=[];for(var i in t)if(null!==t[i]){var n=t[i],o=encodeURIComponent(i);if(Array.isArray(n))for(var r=0,a=n;r<a.length;r++){var s=a[r];e.push(o+"="+encodeURIComponent(s))}else n instanceof Date?e.push(o+"="+encodeURIComponent(n.toISOString())):null!==typeof n&&"object"==typeof n?e.push(o+"="+encodeURIComponent(JSON.stringify(n))):e.push(o+"="+encodeURIComponent(n))}return e.join("&")},Client}()}();
//# sourceMappingURL=pocketbase.iife.js.map
